# [Microsoft Azure - Beginner's Guide + AZ-900 - 2021](https://www.udemy.com/course/microsoft-azure-beginners-guide/)

### Azure Virtual Machines
- resources that get created when you create a VM
    - a virtual network
    - disk to store the OS and additional disks you choose
    - NIC with a private and public IP
    - Network Security Group that acts as a firewall
- stopping/deallocating/costs
    - stopping a VM using the Azure Portal stop button
        - "deallocates" the VM which removes it from the physical server
        - and deletes anything in the temporary storage disk
        - puts the VM in "stopped" and "deallocated" states
        - restarting the VM will give it a new public IP address
    - shutting down a VM from the VM OS itself
        - doesn't deallocate the VM
        - puts the VM in "stopped" state
        - doesn't delete temporary data
        - keeps original public IP
    - there is a partial compute charge for VMs in the stopped state and no charge for compute time for VMs in the deallocated state
    - there's a partial charge for the OS disk when a VM is deallocated because the disk is a separate resource from the VM
    - you can alter the public IP resource to be a static address that doesn't change even if the VM has been deallocated/reallocated
- availability set
    - when creating a VM you can choose to make it part of an availability set
    - Azure spreads the VMs that are in the set across different fault domains and update domains
        - fault domain: separate server with its own power source and network link, not dependent on other servers
        - update domain: a set of servers that gets updated at the same time
    - you create an availability set with the number of fault (up to 3) and update (up to 20) domains
    - availability sets are for VMs in the same region
    - once a VM is created you can't assign it to a set
    - an availability set is a resource
    - using sets ups VM SLA to 99.95%
- availability zones
    - an availability zone is a collection of data centers within a region
    - instead of separating VMs only across physical servers, zones let you separate them also across a geographic area
    - using zones ups VM SLA to 99.99%
- there is no extra cost for availability zones or sets, but there is a cost for bandwidth between zones ($0.01/GB)
- dedicated host
    - you are the only customer on the physical host
    - your data is more secure
    - you can control maintenance events
- workload
    - an application or a service (e.g. a web app, a DB server) that you can host on Azure using a service (say, a VM that you install the app/server onto)
- Azure Pricing Calculator vs. Cost Management vs. TOC Calculator
    - Pricing Calculator: for estimating prices of hosting resources
    - Cost Management: seeing costs for resources you're already running
    - TOC Calculator: estimating price for migrating workload/s onto Azure

### Azure Virtual Networks
- IPs
    - the private IP of a VM in a vnet is within the vnet's IP range
    - the public IP of a VM is the only one you can use to access the VM
    - IP (and the network security group) resources are attached to the network interface resource (which acts as a NIC) which is then attached to the VM
- for each vnet you assign an IP range (for the private IP addresses) and you can add subnets to the vnet (which starts with a default subnet)
    - a subnet is a subset of the assigned IP range
- a VM
    - can only be part of one vnet
    - can't be moved between networks
    - must be in the same region as the vnet you want it to be connected to
- network security group
    - a NSG can either be assigned to a single NIC for a single VM or an entire subnet
    - it has a list of inbound and outbound security rules
    - some rules are created by default and cannot be changed or removed
    - info needed for rules
        - priority
        - port
        - protocol
        - source and destination
    - the first rule that the request matches is the one that will be followed and the others will be ignored
        - you can set the order of the rules with the priority value
        - the rules get evaluated lowest number to largest
- application security group
    - a logical group of VMs/servers/etc. (that are all linked to the same NSG) that you can use as destination/source when creating NSG rules
    - use if you, let's say, want to write some rules just for your web servers and some just for your DB servers
    - your web servers will be one application security group and your DB servers another
- virtual network peering
    - you can connect servers on different vnets via their private IP addresses by putting a virtual network peering connection on each vnet
- point-to-site VPN connection
    - with this you can connect outside-network machines to servers on a vnet via their private IP
    - deploy an Azure VPN gateway resource to create the VPN connections to connect the outside machines to the private IP vnet servers
- site-to-site VPN connection
    - connect an entire on-premise network to your vnet machines via their private IPs
    - create a VPN gateway that is also linked to a local network gateway
    - the local network gateway knows the public IP of the router for the on-premise network and allows traffic from that network onto the vnet through the VPN gateway
- ExpressRoute circuit
    - you connect your on-prem network directly to your Azure network using Microsoft's own infrastructure, instead of using the public internet
    - you either have to connect to a Microsoft datacenter or find another Microsoft customer that uses their infrastructure and will let you plug in

### Azure Storage
- types of Azure storage accounts
    - blob: on a virtual hard disk, used for object files and large files
    - table: used to store table data
    - file: used for file shares, accessed via SMB (server message block protocol)
    - queue: used to send messages between components
- on a storage account, you create a container to hold blob data
    - you can change the access level on each container
    - in the container you can set the access tier, hot/cool/archive, for each blob
