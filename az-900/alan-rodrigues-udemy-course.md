# [Microsoft Azure - Beginner's Guide + AZ-900 - 2021](https://www.udemy.com/course/microsoft-azure-beginners-guide/)

### Azure virtual machines
- resources that get created when you create a VM
    - a virtual network
    - disk to store the OS and additional disks you choose
    - NIC with a private and public IP
    - Network Security Group that acts as a firewall
- stopping/deallocating/costs
    - stopping a VM using the Azure Portal stop button
        - "deallocates" the VM which removes it from the physical server
        - and deletes anything in the temporary storage disk
        - puts the VM in "stopped" and "deallocated" states
        - restarting the VM will give it a new public IP address
    - shutting down a VM from the VM OS itself
        - doesn't deallocate the VM
        - puts the VM in "stopped" state
        - doesn't delete temporary data
        - keeps original public IP
    - there is a partial compute charge for VMs in the stopped state and no charge for compute time for VMs in the deallocated state
    - there's a partial charge for the OS disk when a VM is deallocated because the disk is a separate resource from the VM
    - you can alter the public IP resource to be a static address that doesn't change even if the VM has been deallocated/reallocated
- availability set
    - when creating a VM you can choose to make it part of an availability set
    - Azure spreads the VMs that are in the set across different fault domains and update domains
        - fault domain: separate server with its own power source and network link, not dependent on other servers
        - update domain: a set of servers that gets updated at the same time
    - you create an availability set with the number of fault (up to 3) and update (up to 20) domains
    - availability sets are for VMs in the same region
    - once a VM is created you can't assign it to a set
    - an availability set is a resource
    - using sets ups VM SLA to 99.95%
- availability zones
    - an availability zone is a collection of data centers within a region
    - instead of separating VMs only across physical servers, zones let you separate them also across a geographic area
    - using zones ups VM SLA to 99.99%
- there is no extra cost for availability zones or sets, but there is a cost for bandwidth between zones ($0.01/GB)
- dedicated host
    - you are the only customer on the physical host
    - your data is more secure
    - you can control maintenance events
- workload
    - an application or a service (e.g. a web app, a DB server) that you can host on Azure using a service (say, a VM that you install the app/server onto)
- Azure Pricing Calculator vs. Cost Management vs. TOC Calculator
    - Pricing Calculator: for estimating prices of hosting resources
    - Cost Management: seeing costs for resources you're already running
    - TOC Calculator: estimating price for migrating workload/s onto Azure

### Azure virtual networks
- IPs
    - the private IP of a VM in a vnet is within the vnet's IP range
    - the public IP of a VM is the only one you can use to access the VM
    - IP (and the network security group) resources are attached to the network interface resource (which acts as a NIC) which is then attached to the VM
- for each vnet you assign an IP range (for the private IP addresses) and you can add subnets to the vnet (which starts with a default subnet)
    - a subnet is a subset of the assigned IP range
- a VM
    - can only be part of one vnet
    - can't be moved between networks
    - must be in the same region as the vnet you want it to be connected to
- network security group
    - a NSG can either be assigned to a single NIC for a single VM or an entire subnet
    - it has a list of inbound and outbound security rules
    - some rules are created by default and cannot be changed or removed
    - info needed for rules
        - priority
        - port
        - protocol
        - source and destination
    - the first rule that the request matches is the one that will be followed and the others will be ignored
        - you can set the order of the rules with the priority value
        - the rules get evaluated lowest number to largest
- application security group
    - a logical group of VMs/servers/etc. (that are all linked to the same NSG) that you can use as destination/source when creating NSG rules
    - use if you, let's say, want to write some rules just for your web servers and some just for your DB servers
    - your web servers will be one application security group and your DB servers another
- virtual network peering
    - you can connect servers on different vnets via their private IP addresses by putting a virtual network peering connection on each vnet
- point-to-site VPN connection
    - with this you can connect outside-network machines to servers on a vnet via their private IP
    - deploy an Azure VPN gateway resource to create the VPN connections to connect the outside machines to the private IP vnet servers
- site-to-site VPN connection
    - connect an entire on-premise network to your vnet machines via their private IPs
    - create a VPN gateway that is also linked to a local network gateway
    - the local network gateway knows the public IP of the router for the on-premise network and allows traffic from that network onto the vnet through the VPN gateway
- ExpressRoute circuit
    - you connect your on-prem network directly to your Azure network using Microsoft's own infrastructure, instead of using the public internet
    - you either have to connect to a Microsoft datacenter or find another Microsoft customer that uses their infrastructure and will let you plug in

### Azure storage
- types of Azure storage accounts
    - blob: on a virtual hard disk, used for object files and large files
    - table: used to store table data
    - file: used for file shares, accessed via SMB (server message block protocol)
    - queue: used to send messages between components
- you can create multiple storage resources (containers, file shares, etc.) per storage account
- storage account redundancy options
    - locally redundant: three copies of your data across storage devices in the same data centers
    - zone-redundant: data is copied three times across three data centers within a zone
    - geo-redundant: data is copied three times in one region and again three times in another region
    - read-access geo-redundant: you can read data from either region instead of just the primary one
    - geo-zone-redundant: combines zone and region redundancy
    - cost increases because you have to store more data and you have to pay for moving data across regions (and zones?)
- blob storage
    - on a storage account, you create a container to hold blob data
    - you can change the access level on each container
    - in the container you can set the access tier, hot/cool/archive, for each blob
    - block blob: used to store text and binary data
    - page blob: a virtual hard disk to store any type of data
- file storage
    - used to store files that are shared between users
    - you can create, let's say, one file share per department
    - unlike with blobs, you have to first connect to the file share to view the files using their URLs
    - you can connect to the file share by running a PowerShell script that Azure provides per file share
- queue storage
    - one part of your app can add messages to the queue that can be picked up by another app and do something given each message
    - one app adds to the queue and another removes from the queue
    - FIFO structure
- table storage
    - entities in a table have to each have a partition key and a row key, which uniquely identify each row (act as PK)
        - the partition key is the column that Azure uses to group data (with the same key value) into partitions to make it faster to query the data
            - example of a partition key: city, product category
        - row key is usually an id property
    - stores non-relational data
- region pairs
    - when you choose geo-redundant storage, you can't choose the secondary region; the secondary region will be the region that is paired with the primary region
- Azure SQL databases
    - you can either run your own SQL server on a VM (IaaS) and have full control
        - you can choose to access the DB only via private IP
        - you access the DB through the VM itself
        - you have to create backup solutions
        - you have to do the work to guarantee availability
    - or you can use PaaS SQL server where you only have to deal with the server and not the infrastructure it's running on
        - has built-in backup
        - 99.99 SLA
        - single database: you create a DB from scratch on Azure
        - managed instance: move existing DBs onto Azure, created the DBs you need automatically
        - elastic pool: all your DBs share the underlying resources
    - when you create a SQL server, Azure creates the DB and the server itself that the DB is hosted on
        - you can't actually log into the server because Azure is managing it, not you (because PaaS)
        - when creating, you can choose to add the DB to an elastic pool
        - if you choose a DTU (database transaction unit) service tier
            - you have a set amount of CPU processing power and memory that your DB can use
            - you have to increase that capacity if you want more DTUs
            - a DTU is a unit of measure that combines CPU and memory
            - you can also choose a max size for the DB
        - if you could choose a vCore-based service tier
            - you set the number of virtual cores and amount of memory

### understanding cloud concepts
- high availability
- scalability
- disaster recovery (through redundancy)
- elasticity (how flexible a workload is to changing demands)
- fault tolerance
- cloud service types
    - IaaS
    - PaaS
    - SaaS
- economies of scale
    - Azure owns a ton of infrastructure, which lowers the average cost of the components
        - the cost savings gets passed to the customer
    - capital expenditure: initial cost
    - operational expenditure: recurring costs

### more Azure core services - part 1
- Azure (web) apps
    - you can host your app on a VM, IaaS
    - or you can deploy it on an Azure web app service, PaaS
    - there are app service plans: free, shared env, basic dedicated, standard production, premium performance, high performance and secure
        - you get different running time limits for the different plans
- VM scale sets
    - when a VM starts to reach the limits of its CPU
        - you can increase the VM's CPU size
        - or you can create a scale set that will automatically add VMs based on the CPU usage of your VM
        - create a custom image to apply to each new VM, otherwise you have to set up each VM as it gets created
        - you can add another condition to remove VMs when CPU usage goes below a certain percentage
- Azure load balancer
    - equally split traffic between the VMs hosting your app
- Azure Resource Manager Templates
    - a JSON template that will create a set of resources that you frequently need to create
    - e.g. you frequently create test environments (a combination of VM/client, server, DB)
    - you can find templates on Azure Marketplace
- Azure traffic manager
    - DNS routing service
    - create an Azure traffic manager profile that connects to multiple endpoints
    - the traffic manager profile can route to any location, globally, whereas the load balancer can only route within a region
    - the traffic manager can route based on different attributes, like priority, weightage, etc.
- serverless services
    - Azure Functions
    - Azure Logic Apps

### more Azure core services - part 2
- monitoring
    - you can pick your scope, the resources you want to monitor
    - you can create alter trigger rules
    - action group
        - creates a resource called an action group
        - you define actions to perform based on alerts
- log analytics
    - creating some resources automatically creates a log analytics resource
    - you can direct logs from specific resources to a log analytics workspace/resource
- Docker and containers
    - VMs are used to isolate the running of different apps
    - containers do the same thing, isolating apps and their dependencies
    - containers are isolated instances that can run side-by-side on the same VM or machine
    - containers include an OS, libraries/dependencies and the app itself
    - Docker engine
        - is a container toolset
        - it monitors and runs the containers on the VM
- Azure Kubernetes service
    - Kubernetes
        - is container orchestration software
        - it lets you manage all your containers/nodes across all your VMs, as well as the VMs themselves
        - one machine running Kubernetes will be the "master" of your "Kubernetes cluster"
            - the cluster is your whole set of containers being managed by the master
        - Kubernetes can perform load balancing
        - it can provide DNS names to your containers
        - it can restart, create, kill containers
    - Azure Kubernetes
        - you can create a Kubernetes resource in Azure through which you can create and manage containers
- Azure Content Delivery Network
    - point of presence: a place where you store copies of your data on "edge servers" on a different region that where your resource is deployed
    - your main resource might be in one region, but you can create a content delivery network profile to add resources to edge servers
    - you can have multiple points of presence
    - origin: your original resource at its original location
    - if the client doesn't find the service/data at the point of presence, it will then redirect to the origin
    - edge servers cache responses
- Azure Advisor
    - access from Azure Portal
    - gives you advice on minimizing cost, increasing security, reliability and performance
- Azure Application Insights
    - helps to diagnose issues and detect anomalies
    - understand how users use your app
    - what gets monitored
        - response times
        - failure rates
        - exceptions
        - page views
        - diagnostic trace logs
- Azure DevOps
    - create task boards
    - create pipelines for CI/CD
    - create test plans
    - create repos
    - create artifacts to store packages
- DevTest Labs
    - devs can create resources for testing/demoing based on predefined Azure Resource Manager templates
    - you can schedule auto-shutdown or autostart for your machines
    - you can set limits on the number of machines that can be created
    - you can easily track costs
- machine learning
    - in the machine learning resource, in the designer, you can use prebuilt models or create your own
    - you can then edit/create the model on the canvas
    - you can add datasets, select algorithms for training and score your model
    - then you create a compute cluster to run the machine learning pipeline
- cognitive services
    - set of prebuilt AI services
        - computer vision (image analyzation, facial emotion recognition)
        - language
        - speech
        - decision
        - search
    - use ready-made APIs to access these services
- bot services
    - used for web chats
    - based on Azure AI services
- IoT Hub
    - managed services for messages to and from IoT devices
    - secure communication if necessary
    - use Azure Stream Analytics to put data in a DB

### security, privacy, compliance and trust

### Azure pricing and support
